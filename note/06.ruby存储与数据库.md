### IO交互

1. 键盘交互

```ruby
# 1. 键盘输入内容
a = gets
puts a

# 2. 读取行，行读取需要EOF，按下CTRL+D实现。
lines = readlines
puts lines.length

# 3. 除了以上2种主动读取外， 也支持被动读取操作， 即
ruby readline.rb < xxx.txt 这样以一个<符号来加载到ruby文件里当作输入源
```

2. 读文件

关键类File. 当和文件交互时， 经常使用Dir::path来拿到当前工作的文件夹路径。

```ruby
# 1. 打开读取文件
# File.open , File.new('url', 'mode') 都可以
File.open('text.txt') do |f|
  puts f.gets
end

f = File.new("text.txt", "r")
puts f.gets
f.close
# 以上2种都能用于文件加载， 其中第一种用得多一些

# 当然也能写成一个类来处理文件
class MyFile
    attr_reader :handle
    
    # 这里在创建MyFile的实例时， 会将传入的文件挂到handle变量上， handle是只读的，不能更改。
    def initialize(filename)
      @handle = File.new(filename, "r")
    end
    
    def finished
      @handle.close
    end
end

f = MyFile.new("text.txt")
puts f.handle.gets
f.finished
```

当读取的是多行文本文件时， File的each方法默认使用的是\n做为换行识别符号， 如果需要自定义换行符， 可以在each方法里传递参数
即可实现。

```ruby
File.open("text.txt").each(",") {|line| puts line}
```

File的each方法是按照句子拆分为数组的， ruby也有读取成其他内容形式的方式， 比如`each_byte` 按照字节读取, `each_char` 按照字符读取

```ruby
File.open("text.txt").each_byte {|byte| puts byte}
File.open("text.txt").each_char {|char| puts byte}
```

`gets` 方法只会提取一行， 如果使用的是gets方法来打印内容， 需要循环`gets`方法才可以

```ruby
File.open("text.txt") do |line|
  2.times {puts line.gets(",")}
end

# getc用于获取首字母
File.open("text.txt") do |line|
  2.times {puts line.getc}
end
```

当然也有`readlines`这种其他语言都有的读取整篇文章的方法, 和`readline`这种只读取一行的方法

```ruby
puts File.open("text.txt").readlines.join("-")
```

也有`read`方法用来限制读取多少个字符, 下面的例子是只读6个字符。 不过`read`方法本身能直接将文件全部加载到内存，
然后再以字符串的形式存储， 相对的， 也有 `readlines`方法能以数组形式存储

File这个类不只限制于操作文本文件， 其他只要是文件都能操作，包括二进制文件，图片等。

```ruby
# 1.
File.open("test.txt") do |f|
  puts f.read(6)
end

# 2.
data = File.read("text.txt")

# 3.
array_of_data = File.readlines("text.txt")
```

那文件中的指针如何获取呢？ ruby 提供了 `pos` 方法（对应position）来获取文件指针

```ruby
# 1.
f = File.open("text.txt")
puts f.pos # 0
puts f.gets # 输出一行
puts f.pos # 23 停在那行结尾

# 2. pos属性也能手动设定，这样相当于动了光标到指定位置
f = File.open("text.txt")
f.pos = 8
f.gets
puts f.pos # 28
```

3. 写文件

