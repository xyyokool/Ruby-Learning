### rails介绍

#### ruby主流Web框架

- rails
  - 大而全, MVC开发模式
- sinatra
  - 小而美, 类似于Koa

#### rails

> rails6版本自带包

- rails: ruby on rails 的核心包
- action mailer: 邮件发送依赖
- action pack: 处理网络请求的依赖, 包括了路由, controllers的定义与view层的渲染
- active record: Data类映射数据库table的依赖,类似于mybatis的pojo
- active support: 工具依赖, 比如时间处理, 数字处理, 数组,哈希处理.
- active job: 定时任务依赖
- active storage: 文件上传到云服务器的依赖
- active model: 和active record一起存在, 用于创建model层
- action view: 处理view层模版查找与渲染的依赖
- action text: 富文本编辑依赖

> rails安装

- 需要安装node 
- 需要安装gem
- 需要安装sqlite3
- 数据库默认是sqlite, 可以切换
- 执行 `gem install rails`
- 安装后 `rails -v` 查看安装情况
- 执行 `gem install sqlite3`

> rails创建项目

- 执行命令创建项目: `rails new mydiary` mydiary为项目名称
- 创建时可以更改适配数据库, 需要更改则执行 `rails new mydiary -d mysql`

> ruby项目结构

- app: rails项目主文件夹
  - assets: 保存生产用的图片与CSS文件
  - javascript: 用于前端JS文件保存,在rails6版本时需要下方`Webpacker`所述进行代码转换, rails7版本则不再需要这一步骤. rails6版本提供了`Webpacker` 进行前端部分开发, rails7已经舍弃Webpacker(退役), 转为内置使用esbuild. 因此在v6版本里还能看到Webpacker这个文件夹用于前端代码的处理, 它是一个gem. 官方对于v6版本仍在使用Webpacker的应用, 提供了转换到`jsbundling-rails`的选项, 链接: `https://github.com/rails/jsbundling-rails/blob/main/docs/switch_from_webpacker.md`
  - channel: 包含了ActionCable所要使用的所有文件, ActionCable允许rails使用websocket.
  - mailers: 用于处理邮件发送, 例如欢迎邮件等会被保存在这.
  - controllers: 新建项目只会包括`application_controller.rb`文件, 是整个rails项目的controller根类
  - helpers: 提供方法给views层调用.
  - models: 用于管理项目的所有model文件
  - views: 前端模版文件存放地, 典型模式下,每一个controller都应该有一个对应的文件夹用于管理
    - layouts: 前端全局模版文件存放地.
- bin: 项目窗口命令文件存放地, 类似于node里package.json所保管的script命令
- config: 管理项目的所有配置文件,多使用yaml管理
- db: 用于数据库数据的硬盘持久化保存,备份,以及迁移.
- lib: rails的第三方依赖存储地, 以及Rake的task也会保存在这.
- log: 包括了整个项目的log文件
- node_modules: 前端第三方库保存位置, 使用Webpacker在rails里进行依赖管理. Webpacker使用npm或yarn进行依赖下载与管理.
- public: 保存工程的非静态文件. 主要用于工程内资源路径查找,比如`public/js, public/css, public/images`, 有些工程会有类似于`.htaccess` 文件的内容来直接运行项目(在使用了CGI或者FastCGI的情况下,已不推荐)
- test: 包括了项目的所有test的内容
- tmp: 项目临时数据保存的位置, 比如缓存,session文件等.